[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Therapy Plan",
  "enabled": 1,
  "modified": "2024-06-14 14:53:27.694573",
  "module": "Swissmedhealth",
  "name": "Custom Buttion Therapy Plan",
  "script": "frappe.ui.form.on('Therapy Plan', {\n\trefresh: function(frm,cdt,cdn) {\n\t    frm.page.remove_inner_button(__('Therapy Session'),  __('Create'));\n\t\tfrm.add_custom_button(__(\"Treatment Appointment\"), function() {\t    \t\t\n\t\t\tfrappe.new_doc(\"Therapy Session\", {\n\t\t\t    \"therapy_plan\": frm.doc.name,\n\t\t\t\t\"patient\": frm.doc.patient,\n\t\t\t});\n\t\t}, __(\"Create\"));\n\t}\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Therapy Session",
  "enabled": 1,
  "modified": "2024-06-18 10:11:31.457816",
  "module": "Swissmedhealth",
  "name": "Calendar View",
  "script": "frappe.views.calendar[\"Therapy Session\"] = {\n\tfield_map: {\n\t\t\"status\": \"Draft\",\n        \"id\": \"name\",\n        \"title\": \"patient\",\n        \"start\": \"start\",\n        \"end\": \"end\",  // Make sure you have an end_date if needed\n        // \"allDay\": \"all_day\", // Optional, if you are using all-day events\n        \"therapy_plan\": \"therapy_plan\",\n        \"eventColor\": \"color\"\n\t},\n\torder_by: \"start_date\",\n\tgantt: true,\n\tget_events_method: \"swissmedhealth.public.therapy_session.get_events\"\n};\n",
  "view": "List"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Therapy Session",
  "enabled": 1,
  "modified": "2024-06-19 15:10:36.212264",
  "module": "Swissmedhealth",
  "name": "Script room and chair multi select",
  "script": "frappe.ui.form.on('Therapy Session', {\n    // refresh: function(frm) {\n    //     frm.add_fetch('therapy_type', 'room_number', 'room_number');\n    // },\n    therapy_type: function(frm) {\n        console.log(\"test :::::::::::::::::::::::::::::::::::\");\n        if(frm.doc.therapy_type) {\n            // Fetch room numbers based on selected therapy types\n            frappe.call({\n                method: 'swissmedhealth.public.therapy_session.get_room_numbers_by_therapy_types',\n                args: {\n                    therapy_type_ids: frm.doc.therapy_type\n                },\n                callback: function(r) {\n                    if(r.message) {\n                        let room_numbers = r.message;\n                        frm.clear_table(\"custom_room_number_1\");  // Assuming \"room_numbers\" is the table field\n                        \n                        room_numbers.forEach(function(room) {\n                            console.log(\"room ::::::::::::::::\", room);\n                            let new_row = frm.add_child(\"custom_room_number_1\");\n                            new_row.name1 = room;\n                        });\n                        \n                        refresh_field(\"custom_room_number_1\");\n                    }\n                }\n            });\n        }\n    }\n});\n\n\nfrappe.ui.form.on('Therapy Session', {\n    therapy_type: function(frm) {\n        console.log(\"test :::::::::::::::::::::::::::::::::::\");\n        if(frm.doc.therapy_type) {\n            // Fetch room numbers based on selected therapy types\n            frappe.call({\n                method: 'swissmedhealth.public.therapy_session.get_total_chair_by_therapy_types',\n                args: {\n                    therapy_type_ids: frm.doc.therapy_type\n                },\n                callback: function(r) {\n                    if(r.message) {\n                        let chair_numbers = r.message;\n                        frm.clear_table(\"custom_total_chairs\");  // Assuming \"room_numbers\" is the table field\n                        \n                        chair_numbers.forEach(function(chair) {\n                            console.log(\"chair ::::::::::::::::\", chair);\n                            let new_row = frm.add_child(\"custom_total_chairs\");\n                            new_row.name1 = chair;\n                        });\n                        \n                        refresh_field(\"custom_total_chairs\");\n                    }\n                }\n            });\n        }\n    }\n});\n\nfrappe.ui.form.on('Therapy Session', {\n    therapy_type: function(frm) {\n        console.log(\"test :::::::::::::::::::::::::::::::::::\");\n        if(frm.doc.therapy_type) {\n            // Fetch room numbers based on selected therapy types\n            frappe.call({\n                method: 'swissmedhealth.public.therapy_session.get_total_beds_by_therapy_types',\n                args: {\n                    therapy_type_ids: frm.doc.therapy_type\n                },\n                callback: function(r) {\n                    if(r.message) {\n                        let bed_numbers = r.message;\n                        frm.clear_table(\"custom_total_beds\");  // Assuming \"room_numbers\" is the table field\n                        \n                        bed_numbers.forEach(function(bed) {\n                            console.log(\"bed ::::::::::::::::\", bed);\n                            let new_row = frm.add_child(\"custom_total_beds\");\n                            new_row.totals_beds = bed;\n                        });\n                        \n                        refresh_field(\"custom_total_beds\");\n                    }\n                }\n            });\n        }\n    }\n});\n",
  "view": "Form"
 }
]